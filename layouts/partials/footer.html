<footer>
  <div style="display: flex">
    {{- range $index, $key := .Site.Params.Social -}}
    <a class="soc" href="{{ $key.url }}" rel="me" title="{{ $key.name }}"
      ><i data-feather="{{ $key.icon }}"></i
    ></a>
    <a class="border"></a>
    {{- end -}}
  </div>
  <div class="footer-info">
    {{ dateFormat "2006" now }} {{ with .Site.Copyright }} {{ . }} {{ end }}
  </div>
</footer>
{{ if not .Site.IsServer }} {{ template "_internal/google_analytics_async.html"
. }} {{ end }} {{- if (isset .Site.Params "social") -}}
<script>
  feather.replace();
</script>
{{- end -}}

<script>
  // Only load on production environment.
  if (window.location.host !== "lilymara.xyz")
    window.goatcounter = { no_onload: true };
</script>
<script
  data-goatcounter="https://lilymaraxyz.lilys.hair/count"
  async
  src="//lilymaraxyz.lilys.hair/count.js"
></script>
<script src="https://unpkg.com/open-heart-element" type="module"></script>
<script>
  window.customElements.whenDefined("open-heart").then(() => {
    for (const oh of document.querySelectorAll("open-heart")) {
      oh.getCount();
    }
  });
  // refresh component after click
  window.addEventListener("open-heart", (e) => {
    e && e.target && e.target.getCount && e.target.getCount();
  });
</script>

<script type="text/javascript">
  // This copy button snippet stolen shamelessly from https://www.dannyguo.com/blog/how-to-add-copy-to-clipboard-buttons-to-code-blocks-in-hugo/

  document
    .querySelectorAll(".highlight > pre > code")
    .forEach(function (codeBlock) {
      var button = document.createElement("button");
      button.className = "copy-code-button";
      button.type = "button";
      button.innerText = "Copy";

      button.addEventListener("click", function () {
        navigator.clipboard.writeText(codeBlock.innerText).then(
          function () {
            /* Chrome doesn't seem to blur automatically,
                   leaving the button in a focused state. */
            button.blur();

            button.innerText = "Copied!";

            setTimeout(function () {
              button.innerText = "Copy";
            }, 2000);
          },
          function (error) {
            button.innerText = "Error";
          }
        );
      });

      var pre = codeBlock.parentNode;
      if (pre.parentNode.classList.contains("highlight")) {
        var highlight = pre.parentNode;
        highlight.parentNode.insertBefore(button, highlight);
      } else {
        pre.parentNode.insertBefore(button, pre);
      }
    });
</script>
